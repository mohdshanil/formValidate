<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <title>Form validation plugin</title>
    <style>
    html, body{
        margin: 0;
    }
    .signup-container{
        width: fit-content;
        height: fit-content;
        background-color: #DCDCDC;
        padding: 15px;
        margin: auto;
        position: absolute;
        top: 0;
        bottom:0;
        left: 0;
        right: 0;
    }
    #signup-form{
        padding: 10px;
    }
    #signup-form input{
        display: block;
        clear: both;
        margin: 15px;
        margin-bottom: 5px;
        width: 300px;
        padding: 10px;
        font-size: 14px;
        color: #332525;
    }
    #signup-form input.submit{
        width: 92%;
        margin: 15px auto;
        padding: 12px;
        border-radius: 2px;
        background: #679463;
        color: #fff;
    }
    .error{
        float: right;
        margin: 0px 16px 5px;
        color: #E03F3F;
    }
    </style>
</head>
<body>
<section class="signup-container">
<form action="" method="post" id="signup-form" novalidate="novalidate">
        <input  name="username" placeholder="User Name" value=""  data-formValidate="string">
        <input  name="phone" placeholder="0123456789" value=""  data-formValidate="number">
        <input  name="email" placeholder="email@domain.ab" value=""  data-formValidate="email">
        <input  name="password" placeholder="Password" type="password" data-formValidate="password">
        <input  type="button" value="Submit" id="submit" name="submit" class="submit">
</form>
<section>


        <script>

(function ( $ ) {

  $.fn.extend({
        formValidate: function(options) {
            options = $.extend( {}, $.formValidate.defaults, options );

            this.each(function() {
                new $.formValidate($(this),options);
            });
            return this;
        }
    });


    $.formValidate = function( options ) {


        // Default options.
        var settings = $.extend({
            // These are the defaults.
            AttributeUsed       : "data-Formvalidate",
            TriggerUsed         : "blur",
            scroll              : true,
            focusFirstField     : false,
            hideErrorOnChange   : true,
            skipHiddenFields    : true,
            assyncPattern       : true,
            assyncUrl           : ''
        }, options );

        
        var emailRegex = /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]{2,4}$/;
        var usernameRegex = /^[a-z0-9_-]{3,16}$/; 
        var numberRegex = /^[0-9]*$/;
        var stringRegex = /^\w+$/;
        var passwordRegex = /^[a-z0-9_-]{6,18}$/;
        var phoneNumber = /[0-9-()+]{3,20}/;

 
        var required = true;
        var message = '';
        //skip hidden field validation
        var shf = settings.skipHiddenFields  ? ':input[type=hidden]' : '';

        

        var inputs = $('form input, form textarea, form select')
        .not(':input[type=button], :input[type=submit], :input[type=reset]' + ',' + shf );

        $(inputs).each(function(k){
            
            $(this).hideMessage();

            var $this = $(this);
            var inputName = $this.attr('name');
            var inputVal = $this.val();
            
            if(!inputVal) { // all fields are mandatory
            required = false;
            
            $this.before('<span class="error"> Please enter your ' + inputName + '</span>');
            return false;
            }
            else{
                $(this).textOnly();
                if($(this).attr(settings.AttributeUsed) != undefined) { //if data-SELECTOR is set on element     
                    switch($(this).attr(settings.AttributeUsed)) {
                    case 'number' :
                    matchRegex = numberRegex;
                    break;
                    case 'string' :
                    matchRegex = stringRegex;
                    break;
                    case 'email' :
                    matchRegex = emailRegex;
                    break;
                    case 'password' :
                    matchRegex = passwordRegex;
                    break;
                    }
                    if(!inputVal.match(matchRegex)) {
                        $this.before('<span class="error"> Please enter a valid ' + $(this).attr(settings.AttributeUsed) +  '</span>');                
                        return false;
                    }
                         
                }
                
            }
                
    });
    return this;
 
    };
    
    $.fn.hideMessage = function( message ) {
        $('.error').remove();
    }

    // option defaults
    $.formValidate.defaults = {
            AttributeUsed       : "data-Formvalidate",
            TriggerUsed         : "blur",
            scroll              : true,
            focusFirstField     : false,
            hideErrorOnChange   : true,
            skipHiddenFields    : true,
            assyncPattern       : true,
            assyncUrl           : ''
        
    };
    $.formValidate.addRules = function ( ruleName, fun, msg){
        console.log('qqq',ruleName, fun, msg);
        return $.fn.ruleName = fun;
    };

 
}( jQuery ));

$('form input, form select, form textarea').bind('blur', function(){
    $("form").formValidate({
    rules: {
        txtTextOnly: {
            required: true,
            textOnly: true
        }
    }    
});

$.formValidate.addRules("textOnly", 
                      function(value, element) {
                        console.log('i am called');
                          return !/[0-9]*/.test(value);
                      }, 
                      "Alpha Characters Only." );



});
$('form input, form select, form textarea').bind('keypress', function(){
    $(this).hideMessage();    
});
$('#submit').bind('click', function(){
    $("form").formValidate();    
});



</script>
</body>
</html>
